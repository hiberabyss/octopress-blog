---
layout: post
title: "Ubuntu的一些配置方法"
date: 2013-07-16 20:19
comments: true
categories: Linux
---
以Ubuntu为主的对Linux的一些配置，标记通用则表示也适用于其他Linux版本。

<!--more-->

##安装deepin软件
将如下源添加到`/etc/apt/sources.list`即可（注意不要`sudo apt-get upgrade`，否则会变成deepin源里的包:(）

```bash
deb http://mirrors.ustc.edu.cn/deepin/ raring main non-free
```

然后安装音乐和视频播放器：

```bash
#需要先安装如下包
sudo apt-get install python-deepin-gsettings
sudo apt-get install deepin-music-player
sudo apt-get install deepin-media-player
```

- [Ubuntu 13.04安装Linux Deepin特色软件](http://www.bentutu.com/ubuntu-add-linuxdeepin-repo.html)

##软件卸载及修复
用`apt-get remove`卸载时会卸载相应的依赖的包，可以用`dpkg --force-all -r package`进行强制卸载。

如果不小心卸载了许多包，可以查看`/var/log/apt/history.log`文件，根据日志记录信息进行修复。

##自动更新
- [Chrome自动更新](http://my.oschina.net/yangphere/blog/131165)

##修改登陆显示信息
tty里的第一行显示的是`/etc/issue`里的内容。   
可以修改`/etc/lsb-release`里的信息。   
修改`/etc/update-motd.d/`文件夹里的内容可以更改登陆之后的显示信息，可以用命令`sudo run-parts /etc/update-motd.d/`来预览。  

ubuntu登录主题相关包`plymouth`

- [Ubuntu的登陆和欢迎信息控制](http://blog.csdn.net/mal327/article/details/6595796)

##内核编译update-initramfs
编译了一次`linux-3.10.1`，卸载之后，每次运行`update-initramfs`都会自动在`boot`目录下生成`initramfs-3.10.1`文件，删除`/var/lib/initramfs-tools/`下相应文件即可。

##时间设置（通用）
利用`ntpdate`进行时间同步，需已安装包`ntp`：

```
ntpdate us.pool.ntp.org
```

修改时区：

```
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

##调整分辨率

```bash
#设置自动调整
#LVDS1为一种显示模式，直接运行xrandr可显示当前可用的模式
xrandr --output LVDS1 --auto
```

##切换输入法

```bash
im-switch -c
```

##利用ezame调整右键菜单
搜索到`Wine Windowns Program Loader`项目，把`No Display`选项关闭（这样便可以在右键菜单选择默认程序时出现该程序），在`Exec`参数前加上`env LANG="zh_CN.UTF-8"`。

##查看UUID

```bash
sudo blkid
ls -l /dev/disk/by-uuid/
```

##编译Linux内核

```bash
#查看帮助文档
make help
#参考当前内核加载的模块生成config文件
make localmodinstall
make
#将生成的模块复制到 /lib/modules/version 目录下
make modules_install
#生成内核文件、initrd文件等，并复制到 /boot/ 目录下
make install
#以上四步即可完成内核的编译与安装
```

##手动清除cache内存

```bash
sync
echo 3 > /proc/sys/vm/drop_caches
#To free pagecache, use 
echo 1 > /proc/sys/vm/drop_caches
#to free dentries and inodes, use
echo 2 > /proc/sys/vm/drop_caches
#to free pagecache, dentries and inodes, use 
echo 3 > /proc/sys/vm/drop_caches
#Because this is a non-destructive operation and dirty objects
#are not freeable, the user should run sync first.
```

- [手工释放linux内存](http://www.linuxany.com/archives/814.html)

##代理上网
只要把网关和DNS地址设置为能上外网的电脑的ip地址即可。

##参考资料
- [教你在不同机器间迁移Linux](http://www.linuxde.net/2013/06/14506.html)

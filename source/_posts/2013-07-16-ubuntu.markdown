---
layout: post
title: "Ubuntu的一些配置方法"
date: 2013-07-16 20:19
comments: true
categories: Linux
---
以Ubuntu为主的对Linux的一些配置，标记通用则表示也适用于其他Linux版本。

<!--more-->

##安装deepin软件
将如下源添加到`/etc/apt/sources.list`即可（注意不要`sudo apt-get upgrade`，否则会变成deepin源里的包:(）

```bash
deb http://mirrors.ustc.edu.cn/deepin/ raring main non-free
```

或者添加如下源：

```bash
sudo apt-add-repository ppa:noobslab/deepin-sc
```

然后安装音乐和视频播放器：

```bash
#需要先安装如下包
sudo apt-get install python-deepin-gsettings
sudo apt-get install deepin-music-player
sudo apt-get install deepin-media-player
sudo apt-get install dmusic-plugin-baidumusic
```

- [Ubuntu 13.04安装Linux Deepin特色软件](http://www.bentutu.com/ubuntu-add-linuxdeepin-repo.html)

##更新单个.list文件
- [apt-get update only for a specific repository](http://askubuntu.com/questions/65245/apt-get-update-only-for-a-specific-repository)

##输出当前终端(tty)的内容

```bash
sudo screendump > /tmp/screen.txt
```

##修改声音面板默认程序
- [Sound Menu](http://helpdeskgeek.com/linux-tips/show-only-your-favorite-music-players-in-the-ubuntu-sound-menu/)

##电源管理（省电）
- [TLP](http://www.noobslab.com/2013/07/how-to-improve-laptop-power-management.html)

##软件卸载及修复
用`apt-get remove`卸载时会卸载相应的依赖的包，可以用`dpkg --force-all -r package`进行强制卸载。

如果不小心卸载了许多包，可以查看`/var/log/apt/history.log`文件，根据日志记录信息进行修复。

##显示屏多窗口

```bash
sudo apt-get install compizconfig-settings-manager
```

按win键，再输入`compiz`，搜索`grid`插件。

- [CCSM](http://askubuntu.com/questions/89503/gtile-for-unity)

##休眠唤醒后执行脚本
编辑目录`/etc/pm/sleep.d/`下文件：

```bash
#!/bin/bash
case "$1" in
    hibernate|suspend)
        ACTION BEFORE SUSPEND/HIBERNATE
        ;;
    thaw|resume)
        ACTION AFTER RESUME
        ;;
    *)
        ;;
esac
exit $?
```

编辑完成后加上可执行权限。

##自动更新
- [Chrome自动更新](http://my.oschina.net/yangphere/blog/131165)

##修改登陆显示信息
tty里的第一行显示的是`/etc/issue`里的内容。   
可以修改`/etc/lsb-release`里的信息。   
修改`/etc/update-motd.d/`文件夹里的内容可以更改登陆之后的显示信息，可以用命令`sudo run-parts /etc/update-motd.d/`来预览。  

ubuntu登录主题相关包`plymouth`

- [Ubuntu的登陆和欢迎信息控制](http://blog.csdn.net/mal327/article/details/6595796)

##内核编译update-initramfs
编译了一次`linux-3.10.1`，卸载之后，每次运行`update-initramfs`都会自动在`boot`目录下生成`initramfs-3.10.1`文件，删除`/var/lib/initramfs-tools/`下相应文件即可。

##时间设置（通用）
利用`ntpdate`进行时间同步，需已安装包`ntp`：

```
ntpdate us.pool.ntp.org
```

修改时区：

```
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

##调整分辨率

```bash
#设置自动调整
#LVDS1为一种显示模式，直接运行xrandr可显示当前可用的模式
xrandr --output LVDS1 --auto
```

##复制粘贴
- `Ctrl+Insert` or `Ctrl+Shift+C`: copy to the clipboard
- `Shift+insert` or `Ctrl+Shift+V`: paste from clipboard

- [Reference](http://askubuntu.com/questions/26655/how-do-you-know-when-to-use-shiftinsert-vs-ctrl-v-vs-right-click-paste-to-paste)

##命令行复制粘贴
- [terminal 复制粘帖 (mac , ubuntu)](http://justcoding.iteye.com/blog/1829963)

##切换输入法

```bash
im-switch -c
```

##利用ezame调整右键菜单
搜索到`Wine Windowns Program Loader`项目，把`No Display`选项关闭（这样便可以在右键菜单选择默认程序时出现该程序），在`Exec`参数前加上`env LANG="zh_CN.UTF-8"`。

##查看UUID

```bash
sudo blkid
ls -l /dev/disk/by-uuid/
```

##远程桌面

- 服务器端安装`vnc4server`，记录下执行时显示的`nums`
- 客户端使用`gvncview server:nums`进行连接，或使用其它远程桌面软件
- [Linux中的远程连接 SSH and VNC图形模式](http://www.cnblogs.com/ayuan/archive/2008/04/26/1171803.html)

##编译Linux内核

```bash
#查看帮助文档
make help
#参考当前内核加载的模块生成config文件
make localmodinstall
make
#将生成的模块复制到 /lib/modules/version 目录下
make modules_install
#生成内核文件、initrd文件等，并复制到 /boot/ 目录下
make install
#以上四步即可完成内核的编译与安装
```

##手动清除cache内存

```bash
sync
echo 3 > /proc/sys/vm/drop_caches
#To free pagecache, use 
echo 1 > /proc/sys/vm/drop_caches
#to free dentries and inodes, use
echo 2 > /proc/sys/vm/drop_caches
#to free pagecache, dentries and inodes, use 
echo 3 > /proc/sys/vm/drop_caches
#Because this is a non-destructive operation and dirty objects
#are not freeable, the user should run sync first.
```

- [手工释放linux内存](http://www.linuxany.com/archives/814.html)

##代理上网
只要把网关和DNS地址设置为能上外网的电脑的ip地址即可。

##参考资料
- [教你在不同机器间迁移Linux](http://www.linuxde.net/2013/06/14506.html)
- [Ubuntu常用效率软件简介](http://ghosertblog.github.io/blog/2013/01/07/ubuntu-efficient-software/)

